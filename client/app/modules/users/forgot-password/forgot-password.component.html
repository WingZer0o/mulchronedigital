<div class="row main-row">
  <div class="col-sm-3"></div>
  <div class="col-sm-6">
    <div *ngIf="!doesComponentHaveToken" class="card">
      <div class="card-block">
        <h1 class="text-center">Forgot password</h1>
        <p class="text-center">Please enter the email address associated with your account, we will send you an email so you can unlock your account</p>
        <div class="row">
          <div class="offset-2"></div>
          <div class="col-sm-8">
            <form class="form" [formGroup]="forgotPasswordForm" (keydown)="handleDownKeyOnForm($event, 'forgotPasswordForm')">
              <div class="form-group">
                <label for="login-email">
                  <strong>Email Address</strong>
                </label>
                <div class="input-group">
                  <div class="input-group-addon input-addon-fa">
                    <i class="fa fa-envelope" aria-hidden="true"></i>
                  </div>
                  <input type="email" class="form-control" id="login-email-input" placeholder="Enter email address" formControlName="email">
                  <span class="input-group-addon custom-input-addons" *ngIf="!forgotPasswordForm.controls.email.errors">
                    <i class="fa fa-check-circle-o input-checkbox" aria-hidden="true"></i>
                  </span>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="forgotPasswordForm.controls.email.errors && hasTheFormBeenSubmitted">
                  <strong>You must enter a valid email address</strong>
                </div>
              </div>
              <button type="button" class="btn btn-primary" (click)="toggleForgotPasswordSubmit()">
                <div *ngIf="!hasSubmitButtonBeenClicked">Submit</div>
                <i *ngIf="hasSubmitButtonBeenClicked" class="fa fa-spinner fa-pulse fa-1x fa-fw" aria-hidden="true"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="doesComponentHaveToken" class="card">
      <div class="card-block">
        <h1 class="text-center">Forgot password</h1>
        <p class="text-center">Please enter the password we sent in the forgot password email.</p>
        <div class="row">
          <div class="offset-2"></div>
          <div class="col-sm-8">
            <form class="form" [formGroup]="resetPasswordForm" (keydown)="handleDownKeyOnForm($event, 'resetPasswordForm')">
              <div class="form-group">
                <label for="token-password-input">
                  <strong>Token Password</strong>
                </label>
                <div class="input-group">
                  <div class="input-group-addon input-addon-fa">
                    <i class="fa fa-key" aria-hidden="true"></i>
                  </div>
                  <input type="password" class="form-control" id="token-password-input" placeholder="Enter the password we sent you" formControlName="tokenPassword">
                  <span class="input-group-addon custom-input-addons" *ngIf="!resetPasswordForm.controls.tokenPassword.errors">
                    <i class="fa fa-check-circle-o input-checkbox" aria-hidden="true"></i>
                  </span>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="resetPasswordForm.controls.tokenPassword.errors && hasTheFormBeenSubmitted">
                  <strong>The token password must be 12 characters</strong>
                </div>
              </div>
              <div class="form-group">
                <label for="new-password-input">
                  <strong>New Password</strong>
                </label>
                <div class="input-group">
                  <div class="input-group-addon input-addon-fa">
                    <i class="fa fa-lock" aria-hidden="true"></i>
                  </div>
                  <input type="password" class="form-control" id="new-password-input" placeholder="Enter your new password" formControlName="password">
                  <span class="input-group-addon custom-input-addons" *ngIf="!resetPasswordForm.controls.password.errors">
                    <i class="fa fa-check-circle-o input-checkbox" aria-hidden="true"></i>
                  </span>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="resetPasswordForm.controls.password.errors && hasTheFormBeenSubmitted">
                  <strong>Your password must be atleast 8 characters with one upper case letter, one lower case letter, one number,
                    and one special character</strong>
                </div>
              </div>
              <div class="form-group">
                <label for="confirm-password-input">
                  <strong>Confirm Password</strong>
                </label>
                <div class="input-group">
                  <div class="input-group-addon input-addon-fa">
                    <i class="fa fa-unlock" aria-hidden="true"></i>
                  </div>
                  <input type="password" class="form-control" id="confirm-password-input" placeholder="Confirm new password" formControlName="confirmPassword">
                  <span class="input-group-addon custom-input-addons" *ngIf="!resetPasswordForm.controls.confirmPassword.errors">
                    <i class="fa fa-check-circle-o input-checkbox" aria-hidden="true"></i>
                  </span>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="resetPasswordForm.controls.password.errors && hasTheFormBeenSubmitted">
                  <strong>The passwords do not match</strong>
                </div>
              </div>
              <button type="button" class="btn btn-primary" (click)="toggleResetPasswordSubmit()">
                <div *ngIf="!hasSubmitButtonBeenClicked">Submit</div>
                <i *ngIf="hasSubmitButtonBeenClicked" class="fa fa-spinner fa-pulse fa-1x fa-fw" aria-hidden="true"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-3"></div>
  </div>

  <app-error-modal [title]="modalTitle" [body]="modalBody"></app-error-modal>